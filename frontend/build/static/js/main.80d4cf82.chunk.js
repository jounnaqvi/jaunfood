(this.webpackJsonpmernapp=this.webpackJsonpmernapp||[]).push([[0],{28:function(e,t,s){},41:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),l=s(17),r=s.n(l),n=(s(28),s(6)),i=s(4),o=s(21),d=s(9),j=s.n(d),m=s(1);const b={position:"fixed",top:"50%",left:"50%",backgroundColor:"rgb(34,34,34)",transform:"translate(-50%, -50%)",zIndex:1e3,height:"90%",width:"90%"},h={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3};function x(e){let{children:t,onClose:s}=e;return j.a.createPortal(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{style:h}),Object(m.jsxs)("div",{style:b,children:[Object(m.jsx)("button",{className:"btn bg-danger fs-4",style:{marginLeft:"90%",marginTop:"-35px"},onClick:s,children:" X "}),t]})]}),document.getElementById("cart-root"))}var O=s(53),u=s(18),p=s.n(u);const g=Object(a.createContext)(),N=Object(a.createContext)(),v=(e,t)=>{switch(t.type){case"ADD":return[...e,{id:t.id,name:t.name,qty:t.qty,size:t.size,price:t.price,img:t.img}];case"REMOVE":let s=[...e];return s.splice(t.index,1),s;case"DROP":return[];case"UPDATE":let a=[...e];return a.find(((e,s)=>(e.id===t.id&&(console.log(e.qty,parseInt(t.qty),t.price+e.price),a[s]={...e,qty:parseInt(t.qty)+e.qty,price:t.price+e.price}),a))),a;default:console.log("Error in Reducer")}},y=e=>{let{children:t}=e;const[s,c]=Object(a.useReducer)(v,[]);return Object(m.jsx)(N.Provider,{value:c,children:Object(m.jsx)(g.Provider,{value:s,children:t})})},f=()=>Object(a.useContext)(g),w=()=>Object(a.useContext)(N);function C(){const[e,t]=Object(a.useState)(null),[s,c]=Object(a.useState)(!1);let l=f(),r=w();const n=Object(i.o)();if(0===l.length)return Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"m-5 w-100 text-center fs-3 text-white",children:"The Cart is Empty!"})});let o=l.reduce(((e,t)=>e+t.price),0);return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"container m-auto mt-5 table-responsive table-responsive-sm table-responsive-md",children:[Object(m.jsxs)("table",{className:"table table-hover text-white",children:[Object(m.jsx)("thead",{className:"text-success fs-4",children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{scope:"col",className:"text-white",children:"#"}),Object(m.jsx)("th",{scope:"col",className:"text-white",children:"Name"}),Object(m.jsx)("th",{scope:"col",className:"text-white",children:"Quantity"}),Object(m.jsx)("th",{scope:"col",className:"text-white",children:"Option"}),Object(m.jsx)("th",{scope:"col",className:"text-white",children:"Amount"}),Object(m.jsx)("th",{scope:"col",className:"text-white"})]})}),Object(m.jsx)("tbody",{children:l.map(((e,t)=>Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{scope:"row",className:"text-white",children:t+1}),Object(m.jsx)("td",{className:"text-white",children:e.name}),Object(m.jsx)("td",{className:"text-white",children:e.qty}),Object(m.jsx)("td",{className:"text-white",children:e.size}),Object(m.jsx)("td",{className:"text-white",children:e.price}),Object(m.jsx)("td",{children:Object(m.jsx)("button",{type:"button",className:"btn p-0 text-white d-flex align-items-center justify-content-center",onClick:()=>{r({type:"REMOVE",index:t})},children:Object(m.jsx)(p.a,{})})})]},t)))})]}),Object(m.jsx)("div",{children:Object(m.jsxs)("h1",{className:"fs-2 text-white",children:["Total Price: ",o.toFixed(2),"/-"]})}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{className:"btn bg-success mt-5 text-white",onClick:async()=>{try{let e=localStorage.getItem("userEmail");200===(await O.a.post("http://localhost:5000/api/orderdata",{order_data:l,email:e,order_date:(new Date).toDateString()},{headers:{"Content-Type":"application/json"}})).status&&(r({type:"DROP"}),c(!0),n("/payment"))}catch(e){console.error("Error during checkout:",e),t("An error occurred during checkout. Please try again.")}},children:"Check Out"})}),s&&Object(m.jsx)("div",{className:"alert alert-success mt-3",children:"Checkout successful!"}),e&&Object(m.jsx)("div",{className:"alert alert-danger mt-3",children:e})]})})}function S(){const[e,t]=Object(a.useState)(!1),s=Object(i.o)();let c=f();const l={color:"#FFFFFF"};return Object(m.jsxs)("nav",{className:"navbar navbar-expand-lg",style:{backgroundColor:"#470D0D"},children:[Object(m.jsx)(n.b,{className:"navbar-brand fs-1 fst-italic",to:"#",style:l,children:"JaunFood"}),Object(m.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(m.jsx)("span",{className:"navbar-toggler-icon"})}),Object(m.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[Object(m.jsxs)("ul",{className:"navbar-nav me-auto mb-2",children:[Object(m.jsx)("li",{className:"nav-item active",children:Object(m.jsxs)(n.b,{className:"nav-link active fs-5",to:"/",style:l,children:["Home ",Object(m.jsx)("span",{className:"sr-only"})]})}),localStorage.getItem("authToken")&&Object(m.jsx)("li",{className:"nav-item active",children:Object(m.jsxs)(n.b,{className:"nav-link active fs-5",to:"/myOrder",style:l,children:["MY ORDERS ",Object(m.jsx)("span",{className:"sr-only"})]})})]}),localStorage.getItem("authToken")?Object(m.jsxs)("div",{className:"d-flex",children:[Object(m.jsxs)("div",{className:"btn bg-white text-success mx-2",onClick:()=>{t(!0)},children:["My Cart"," ",Object(m.jsx)(o.a,{pill:!0,bg:"danger",children:c.length})]}),e?Object(m.jsx)(x,{onClose:()=>t(!1),children:Object(m.jsx)(C,{})}):null,Object(m.jsx)("div",{className:"btn bg-white text-danger mx-2",onClick:()=>{localStorage.removeItem("authToken"),s("/login")},children:"Logout"})]}):Object(m.jsxs)("div",{className:"d-flex",children:[Object(m.jsx)(n.b,{className:"btn bg-white text-success mx-1",to:"/login",children:"Login"}),Object(m.jsx)(n.b,{className:"btn bg-white text-success mx-1",to:"/createuser",children:"SignUp"})]})]})]})}function E(){return Object(m.jsx)("div",{children:Object(m.jsx)("footer",{className:"d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top",children:Object(m.jsxs)("div",{className:"col-md-4 d-flex align-items-center",children:[Object(m.jsx)("a",{href:"/",className:"mb-3 me-2 mb-md-0 text-muted text-decoration-none lh-1",children:Object(m.jsx)("svg",{className:"bi",width:"30",height:"24"})}),Object(m.jsx)("span",{className:"text-muted",children:"\xa9 2021 GoFood, Inc"})]})})})}var F=e=>{let{item:t}=e;const s=w(),c=f(),[l,r]=Object(a.useState)(1),[n,i]=Object(a.useState)("Quarter");return t?Object(m.jsxs)("div",{className:"card mt-3",style:{width:"22rem",maxHeight:"520px"},children:[Object(m.jsx)("img",{className:"card-img-top",src:"/burger.jpg",alt:"Card image cap"}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)("h5",{className:"card-title",style:{fontStyle:"italic"},children:t.name}),Object(m.jsxs)("p",{className:"card-text",children:["Category: ",t.category]}),Object(m.jsxs)("p",{className:"card-text",children:["Price: Rs ",t.price.toFixed(2)]}),Object(m.jsxs)("p",{className:"card-text",children:["Rating: ",t.rating]}),Object(m.jsxs)("div",{className:"container w-100",children:[Object(m.jsx)("select",{className:"m-2 h-100 bg-success",onChange:e=>r(Number(e.target.value)),children:Array.from(Array(6),((e,t)=>Object(m.jsx)("option",{value:t+1,children:t+1},t+1)))}),Object(m.jsxs)("select",{className:"m-2 h-100 bg-success",onChange:e=>i(e.target.value),children:[Object(m.jsx)("option",{value:"Quarter",children:"Quarter"}),Object(m.jsx)("option",{value:"Half",children:"Half"}),Object(m.jsx)("option",{value:"Full",children:"Full"})]}),Object(m.jsxs)("div",{className:"d-inline h-100 fs-5",children:["Total Price: Rs ",(t.price*l).toFixed(2)]}),Object(m.jsx)("button",{className:"btn btn-success justify-center ms-2",onClick:async()=>{let e=c.find((e=>e.id===t._id));e&&e.size===n?await s({type:"UPDATE",id:t._id,price:t.price,qty:l}):await s({type:"ADD",id:t._id,name:t.name,price:t.price*l,qty:l,size:n})},children:"Add to cart"})]})]})]}):Object(m.jsx)("div",{children:"Loading..."})};function I(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{id:"carouselExampleIndicators",className:"carousel slide","data-ride":"carousel",style:{objectFit:"contain !important"}}),Object(m.jsx)("div",{className:"carousel-caption",style:{zIndex:"10"},children:Object(m.jsxs)("form",{className:"form-inline",children:[Object(m.jsx)("input",{className:"form-control mr-sm-2",type:"search",placeholder:"Search","aria-label":"Search"}),Object(m.jsx)("button",{className:"btn btn-outline-success text-white bg-success",type:"submit",children:"Search"})]})}),Object(m.jsxs)("div",{id:"carouselExampleInterval",className:"carousel slide","data-bs-ride":"carousel",children:[Object(m.jsxs)("div",{className:"carousel-inner",children:[Object(m.jsx)("div",{className:"carousel-item active","data-bs-interval":"10000",children:Object(m.jsx)("img",{src:"/sandwich.jpg",className:"d-block w-100",alt:"SANDWICH TIME",style:{filter:"brightness(30%)"}})}),Object(m.jsx)("div",{className:"carousel-item","data-bs-interval":"2000",children:Object(m.jsx)("img",{src:"/burger.jpg",className:"d-block w-100",alt:"BURGER TIME"})}),Object(m.jsx)("div",{className:"carousel-item",children:Object(m.jsx)("img",{src:"/momos.jpg",className:"d-block w-100",alt:"MOMO TIME"})})]}),Object(m.jsxs)("button",{className:"carousel-control-prev",type:"button","data-bs-target":"#carouselExampleInterval","data-bs-slide":"prev",children:[Object(m.jsx)("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),Object(m.jsx)("span",{className:"visually-hidden",children:"Previous"})]}),Object(m.jsxs)("button",{className:"carousel-control-next",type:"button","data-bs-target":"#carouselExampleInterval","data-bs-slide":"next",children:[Object(m.jsx)("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),Object(m.jsx)("span",{className:"visually-hidden",children:"Next"})]})]})]})}function k(){const[e,t]=Object(a.useState)([]),[s,c]=Object(a.useState)(!0),[l,r]=Object(a.useState)(null);return Object(a.useEffect)((()=>{(async()=>{try{let e=await O.a.post("http://localhost:5000/api/foodData");console.log(e.data,"17"),t(e.data[0].foodItems)}catch(l){console.error("Failed to fetch food data:",l),r(l.message)}finally{c(!1)}})()}),[]),s?Object(m.jsx)("div",{children:"Loading..."}):l?Object(m.jsxs)("div",{children:["Error: ",l]}):Object(m.jsxs)("div",{children:[Object(m.jsx)(S,{}),Object(m.jsx)(I,{}),Object(m.jsx)("div",{className:"container",style:{display:"flex",flexWrap:"wrap"},children:e.length>0?e.map((e=>Object(m.jsx)("div",{style:{flex:"1",margin:"10px"},children:Object(m.jsx)(F,{item:e})},e._id))):Object(m.jsx)("div",{children:"No data found"})}),Object(m.jsx)(E,{})]})}function P(){const[e,t]=Object(a.useState)({email:"",password:""});let s=Object(i.o)();const c=s=>{t({...e,[s.target.name]:s.target.value})};return Object(m.jsxs)("form",{onSubmit:async t=>{t.preventDefault();const a=await fetch("http://localhost:5000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password})}),c=await a.json();console.log(c),c.success?(localStorage.setItem("userEmail",e.email),localStorage.setItem("authToken",c.authToken),s("/")):alert("Enter valid details")},children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(m.jsx)("input",{type:"email",className:"form-control",name:"email",value:e.email,onChange:c}),Object(m.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{type:"password",className:"form-control",name:"password",value:e.password,onChange:c})]}),Object(m.jsx)("button",{type:"submit",className:"m-3 btn btn-primary",children:"Submit"}),Object(m.jsx)(n.b,{to:"/login",className:"m-3 btn btn-danger",children:"Already a user"})]})}function T(){const[e,t]=Object(a.useState)({name:"",email:"",password:"",geolocation:""}),s=s=>{t({...e,[s.target.name]:s.target.value})};return Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("form",{onSubmit:async t=>{t.preventDefault();const s=await fetch("http://localhost:5000/api/createuser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,email:e.email,password:e.password,location:e.geolocation})}),a=await s.json();console.log(a),a.success||alert("Enter valid details")},children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"name",children:"Name"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"name",value:e.name,onChange:s}),Object(m.jsx)("small",{id:"nameHelp",className:"form-text text-muted",children:"We'll never share your Name with anyone else."})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(m.jsx)("input",{type:"email",className:"form-control",name:"email",value:e.email,onChange:s}),Object(m.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{type:"password",className:"form-control",name:"password",value:e.password,onChange:s})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"geolocation",children:"Address"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"geolocation",value:e.geolocation,onChange:s})]}),Object(m.jsx)("button",{type:"submit",className:"m-3 btn btn-primary",children:"Submit"}),Object(m.jsx)(n.b,{to:"/login",className:"m-3 btn btn-danger",children:"Already a user"})]})})}var D=()=>{const[e,t]=Object(a.useState)({cardNumber:"",cardExpiry:"",cardCVC:""}),[s,c]=Object(a.useState)(""),[l,r]=Object(a.useState)(""),n=s=>{const{name:a,value:c}=s.target;t({...e,[a]:c})};return Object(m.jsxs)("div",{className:"container mt-5",children:[Object(m.jsx)("h2",{className:"text-center mb-4",children:"Payment Information"}),s&&Object(m.jsx)("div",{className:"alert alert-danger",children:s}),l&&Object(m.jsx)("div",{className:"alert alert-success",children:l}),Object(m.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),(()=>{const{cardNumber:t,cardExpiry:s,cardCVC:a}=e;return!!(t&&s&&a)})()?(c(""),r("Payment processed successfully!"),t({cardNumber:"",cardExpiry:"",cardCVC:""})):c("Please fill in all the required fields.")},children:[Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"cardNumber",className:"form-label",children:"Card Number"}),Object(m.jsx)("input",{type:"text",id:"cardNumber",name:"cardNumber",className:"form-control",value:e.cardNumber,onChange:n,required:!0})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"cardExpiry",className:"form-label",children:"Card Expiry (MM/YY)"}),Object(m.jsx)("input",{type:"text",id:"cardExpiry",name:"cardExpiry",className:"form-control",value:e.cardExpiry,onChange:n,required:!0})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"cardCVC",className:"form-label",children:"Card CVC"}),Object(m.jsx)("input",{type:"text",id:"cardCVC",name:"cardCVC",className:"form-control",value:e.cardCVC,onChange:n,required:!0})]}),Object(m.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit Payment"})]})]})};function q(){const[e,t]=Object(a.useState)(null);return Object(a.useEffect)((()=>{(async()=>{try{const e=await fetch("http://localhost:5000/api/myOrderData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:localStorage.getItem("userEmail")})}),s=await e.json();console.log("Order Data received from API:",s),t(s.orderData)}catch(e){console.error("Error fetching order data:",e)}})()}),[]),e?Object(m.jsxs)("div",{children:[Object(m.jsx)(S,{}),Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("div",{className:"row",children:e.order_data.length>0?e.order_data.slice(0).reverse().map(((e,t)=>Object(m.jsx)("div",{children:e.map(((e,t)=>Object(m.jsx)("div",{children:e.Order_date?Object(m.jsxs)("div",{className:"m-auto mt-5",children:[Object(m.jsx)("hr",{}),Object(m.jsx)("strong",{children:e.Order_date})]}):Object(m.jsx)("div",{className:"col-12 col-md-6 col-lg-3",children:Object(m.jsx)("div",{className:"card mt-3",style:{width:"16rem",maxHeight:"360px"},children:Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)("h5",{className:"card-title",children:e.name}),Object(m.jsxs)("div",{className:"container w-100 p-0",style:{height:"38px"},children:[Object(m.jsx)("span",{className:"m-1",children:e.qty}),Object(m.jsx)("span",{className:"m-1",children:e.size}),Object(m.jsx)("span",{className:"m-1",children:e.Order_date}),Object(m.jsxs)("div",{className:"d-inline ms-2 h-100 w-20 fs-5",children:["\u20b9",e.price,"/-"]})]})]})})})},t)))},t))):Object(m.jsx)("div",{children:"No orders found"})})}),Object(m.jsx)(E,{})]}):Object(m.jsx)("div",{children:"Loading..."})}var A=function(){return Object(m.jsx)(y,{children:Object(m.jsx)(n.a,{children:Object(m.jsx)("div",{children:Object(m.jsxs)(i.c,{children:[Object(m.jsx)(i.a,{path:"/login",element:Object(m.jsx)(P,{})}),Object(m.jsx)(i.a,{path:"/createuser",element:Object(m.jsx)(T,{})}),Object(m.jsx)(i.a,{path:"/",element:Object(m.jsx)(k,{})}),Object(m.jsx)(i.a,{path:"/myOrder",element:Object(m.jsx)(q,{})}),Object(m.jsx)(i.a,{path:"/payment",element:Object(m.jsx)(D,{})})]})})})})};var R=e=>{e&&e instanceof Function&&s.e(3).then(s.bind(null,54)).then((t=>{let{getCLS:s,getFID:a,getFCP:c,getLCP:l,getTTFB:r}=t;s(e),a(e),c(e),l(e),r(e)}))};r.a.createRoot(document.getElementById("root")).render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(A,{})})),R()}},[[41,1,2]]]);
//# sourceMappingURL=main.80d4cf82.chunk.js.map