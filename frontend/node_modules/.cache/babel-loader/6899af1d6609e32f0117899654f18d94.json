{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import Delete from'@material-ui/icons/Delete';import{useCart,useDispatchCart}from'../components/contextReducer';import{useNavigate}from'react-router-dom';// Import useNavigate from react-router-dom\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Cart(){const[checkoutError,setCheckoutError]=useState(null);const[checkoutSuccess,setCheckoutSuccess]=useState(false);let data=useCart();let dispatch=useDispatchCart();const navigate=useNavigate();// Initialize useNavigate hook\nif(data.length===0){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"m-5 w-100 text-center fs-3 text-white\",children:\"The Cart is Empty!\"})});}const handleCheckOut=async()=>{try{let userEmail=localStorage.getItem(\"userEmail\");let response=await axios.post(\"http://localhost:5000/api/orderdata\",{order_data:data,email:userEmail,order_date:new Date().toDateString()},{headers:{'Content-Type':'application/json'}});if(response.status===200){dispatch({type:\"DROP\"});setCheckoutSuccess(true);navigate(\"/payment\");// Redirect to the payment page\n}}catch(error){console.error(\"Error during checkout:\",error);setCheckoutError(\"An error occurred during checkout. Please try again.\");}};let totalPrice=data.reduce((total,food)=>total+food.price,0);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container m-auto mt-5 table-responsive table-responsive-sm table-responsive-md\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover text-white\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"text-success fs-4\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"text-white\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"text-white\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"text-white\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"text-white\",children:\"Option\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"text-white\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"text-white\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map((food,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",className:\"text-white\",children:index+1}),/*#__PURE__*/_jsx(\"td\",{className:\"text-white\",children:food.name}),/*#__PURE__*/_jsx(\"td\",{className:\"text-white\",children:food.qty}),/*#__PURE__*/_jsx(\"td\",{className:\"text-white\",children:food.size}),/*#__PURE__*/_jsx(\"td\",{className:\"text-white\",children:food.price}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn p-0 text-white d-flex align-items-center justify-content-center\",onClick:()=>{dispatch({type:\"REMOVE\",index:index});},children:/*#__PURE__*/_jsx(Delete,{})})})]},index))})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h1\",{className:\"fs-2 text-white\",children:[\"Total Price: \",totalPrice.toFixed(2),\"/-\"]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn bg-success mt-5 text-white\",onClick:handleCheckOut,children:\"Check Out\"})}),checkoutSuccess&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success mt-3\",children:\"Checkout successful!\"}),checkoutError&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger mt-3\",children:checkoutError})]})});}","map":{"version":3,"names":["React","useState","axios","Delete","useCart","useDispatchCart","useNavigate","jsx","_jsx","jsxs","_jsxs","Cart","checkoutError","setCheckoutError","checkoutSuccess","setCheckoutSuccess","data","dispatch","navigate","length","children","className","handleCheckOut","userEmail","localStorage","getItem","response","post","order_data","email","order_date","Date","toDateString","headers","status","type","error","console","totalPrice","reduce","total","food","price","scope","map","index","name","qty","size","onClick","toFixed"],"sources":["D:/jaunfood/frontend/src/screens/Cart.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport Delete from '@material-ui/icons/Delete';\r\nimport { useCart, useDispatchCart } from '../components/contextReducer';\r\nimport { useNavigate } from 'react-router-dom';  // Import useNavigate from react-router-dom\r\n\r\nexport default function Cart() {\r\n  const [checkoutError, setCheckoutError] = useState(null);\r\n  const [checkoutSuccess, setCheckoutSuccess] = useState(false);\r\n  \r\n  let data = useCart();\r\n  let dispatch = useDispatchCart();\r\n  const navigate = useNavigate();  // Initialize useNavigate hook\r\n  \r\n  if (data.length === 0) {\r\n    return (\r\n      <div>\r\n        <div className='m-5 w-100 text-center fs-3 text-white'>The Cart is Empty!</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleCheckOut = async () => {\r\n    try {\r\n      let userEmail = localStorage.getItem(\"userEmail\");\r\n      \r\n      let response = await axios.post(\"http://localhost:5000/api/orderdata\", {\r\n        order_data: data,\r\n        email: userEmail,\r\n        order_date: new Date().toDateString()\r\n      }, {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n  \r\n      if (response.status === 200) {\r\n        dispatch({ type: \"DROP\" });\r\n        setCheckoutSuccess(true);\r\n        navigate(\"/payment\");  // Redirect to the payment page\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error during checkout:\", error);\r\n      setCheckoutError(\"An error occurred during checkout. Please try again.\");\r\n    }\r\n  }\r\n\r\n  let totalPrice = data.reduce((total, food) => total + food.price, 0);\r\n\r\n  return (\r\n    <div>\r\n      <div className='container m-auto mt-5 table-responsive table-responsive-sm table-responsive-md'>\r\n        <table className='table table-hover text-white'>\r\n          <thead className='text-success fs-4'>\r\n            <tr>\r\n              <th scope='col' className='text-white'>#</th>\r\n              <th scope='col' className='text-white'>Name</th>\r\n              <th scope='col' className='text-white'>Quantity</th>\r\n              <th scope='col' className='text-white'>Option</th>\r\n              <th scope='col' className='text-white'>Amount</th>\r\n              <th scope='col' className='text-white'></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {data.map((food, index) => (\r\n              <tr key={index}>\r\n                <th scope='row' className='text-white'>{index + 1}</th>\r\n                <td className='text-white'>{food.name}</td>\r\n                <td className='text-white'>{food.qty}</td>\r\n                <td className='text-white'>{food.size}</td>\r\n                <td className='text-white'>{food.price}</td>\r\n                <td>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn p-0 text-white d-flex align-items-center justify-content-center\"\r\n                    onClick={() => { dispatch({ type: \"REMOVE\", index: index }) }}\r\n                  >\r\n                    <Delete />\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n        <div><h1 className='fs-2 text-white'>Total Price: {totalPrice.toFixed(2)}/-</h1></div>\r\n        <div>\r\n          <button className='btn bg-success mt-5 text-white' onClick={handleCheckOut}>Check Out</button>\r\n        </div>\r\n        {checkoutSuccess && <div className='alert alert-success mt-3'>Checkout successful!</div>}\r\n        {checkoutError && <div className='alert alert-danger mt-3'>{checkoutError}</div>}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}